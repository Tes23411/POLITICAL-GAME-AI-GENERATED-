
import { Demographics } from '../types';

const CSV_DATA = `UNIQUE CODE,STATE,PARLIAMENTARY CONSTITUENCY CODE (1958),PARLIAMENTARY CONSTITUENCY NAME (1958),TOTAL ELECTORATE,MALAY (%),CHINESE (%),INDIAN (%),OTHERS (%),INDIAN AND OTHERS (%),URBAN - RURAL CLASSIFICATION (1947)
P.1,PULAU PINANG,P.1,BAGAN,15210,75.84,18.23,5.68,0.25,0,RURAL
P.2,PULAU PINANG,P.2,SEBERANG UTARA,12980,69.48,21.52,8.42,0.58,0,RURAL
P.3,PULAU PINANG,P.3,SEBERANG TENGAH,13415,69.25,20.18,10.35,0.22,0,RURAL
P.4,PULAU PINANG,P.4,SEBERANG SELATAN,10905,63.82,23.78,12.18,0.22,0,RURAL
P.5,PULAU PINANG,P.5,TANJONG,11240,15.36,72.18,11.05,1.41,0,URBAN
P.6,PULAU PINANG,P.6,DATO KRAMAT,8695,19.52,65.38,14.02,1.08,0,URBAN
P.7,PULAU PINANG,P.7,PENANG UTARA,14820,51.25,40.84,6.15,1.76,0,URBAN
P.8,PULAU PINANG,P.8,PENANG SELATAN,12461,56.92,35.88,5.68,1.52,0,URBAN
P.9,MELAKA,P.9,BANDAR MALACCA,13855,63.12,26.84,7.25,2.79,0,URBAN
P.10,MELAKA,P.10,MALACCA TENGAH,11656,69.18,22.45,6.15,2.22,0,URBAN
P.11,MELAKA,P.11,MALACCA UTARA,18520,77.85,10.24,11.68,0.23,0,RURAL
P.12,MELAKA,P.12,MALACCA SELATAN,15684,81.62,8.94,9.42,0.02,0,RURAL
P.13,PERAK,P.13,KRIAN LAUT,14825,93.68,1.52,4.80,0,0,RURAL
P.14,PERAK,P.14,KRIAN DARAT,12414,91.95,2.58,5.47,0,0,RURAL
P.15,PERAK,P.15,BATANG PADANG,7420,77.18,11.85,10.94,0.03,0,RURAL
P.16,PERAK,P.16,TANJONG MALIM,6257,72.84,15.02,12.11,0.03,0,RURAL
P.17,PERAK,P.17,LARUT UTARA,16582,73.45,14.28,12.14,0.13,0,RURAL
P.18,PERAK,P.18,LARUT SELATAN,13872,77.52,12.45,9.90,0.13,0,RURAL
P.19,PERAK,P.19,BRUAS,8945,70.15,23.84,5.99,0.02,0,RURAL
P.20,PERAK,P.20,SITIAWAN,7567,75.08,19.68,5.24,0,0,RURAL
P.21,PERAK,P.21,ULU PERAK,15340,89.25,10.42,0.33,0,0,RURAL
P.22,PERAK,P.22,KUALA KANGSAR,12866,85.48,13.92,0.60,0,0,RURAL
P.23,PERAK,P.23,PARIT,13980,98.92,0.65,0.43,0,0,RURAL
P.24,PERAK,P.24,HILIR PERAK,11697,98.55,0.95,0.50,0,0,RURAL
P.25,PERAK,P.25,BAGAN DATOH,9840,83.45,8.68,7.83,0.04,0,RURAL
P.26,PERAK,P.26,TELOK ANSON,8291,80.38,10.18,9.40,0.04,0,RURAL
P.27,PERAK,P.27,IPOH,7125,30.18,58.42,10.85,0.55,0,URBAN
P.28,PERAK,P.28,MENGLEMBU,5823,35.52,52.78,10.88,0.52,0,URBAN
P.29,PERAK,P.29,SUNGEI SIPUT,6720,62.38,21.85,15.77,0,0,RURAL
P.30,PERAK,P.30,ULU KINTA,5584,67.52,18.85,13.63,0,0,RURAL
P.31,PERAK,P.31,BATU GAJAH,8850,60.25,29.48,10.24,0.03,0,RURAL
P.32,PERAK,P.32,KAMPAR,7366,65.18,26.12,8.68,0.02,0,RURAL
P.33,SELANGOR,P.33,BATU,4820,54.25,29.68,13.42,2.65,0,URBAN
P.34,SELANGOR,P.34,BUNGSAR,4042,58.82,25.75,12.78,2.65,0,URBAN
P.35,SELANGOR,P.35,BUKIT BINTANG,7215,64.18,23.85,9.05,2.92,0,URBAN
P.36,SELANGOR,P.36,SETAPAK,5969,68.25,20.12,9.18,2.45,0,URBAN
P.37,SELANGOR,P.37,ULU SELANGOR,4285,74.82,12.48,10.05,2.65,0,RURAL
P.38,SELANGOR,P.38,RAWANG,3550,79.52,10.25,8.15,2.08,0,RURAL
P.39,SELANGOR,P.39,SABAK BERNAM,11640,96.25,2.68,1.03,0.04,0,RURAL
P.40,SELANGOR,P.40,KUALA SELANGOR,9770,95.58,3.42,0.96,0.04,0,RURAL
P.41,SELANGOR,P.41,LANGAT,5895,82.45,6.18,9.12,2.25,0,RURAL
P.42,SELANGOR,P.42,SEPANG,4939,86.28,4.68,7.52,1.52,0,RURAL
P.43,SELANGOR,P.43,KLANG,7540,82.85,8.92,5.68,2.55,0,RURAL
P.44,SELANGOR,P.44,KUALA LANGAT,6307,86.12,7.28,4.25,2.35,0,RURAL
P.45,SELANGOR,P.45,KAPAR,5145,86.25,9.42,4.22,0.11,0,RURAL
P.46,SELANGOR,P.46,DAMANSARA,4320,89.82,8.15,1.92,0.11,0,RURAL
P.47,NEGERI SEMBILAN,P.47,JELEBU-JEMPOL,14425,93.82,5.12,0.98,0.08,0,RURAL
P.48,NEGERI SEMBILAN,P.48,KUALA PILAH,12077,92.75,5.98,1.27,0.06,0,RURAL
P.49,NEGERI SEMBILAN,P.49,PORT DICKSON,10140,85.48,7.82,6.42,0.28,0,RURAL
P.50,NEGERI SEMBILAN,P.50,REMBAU - TAMPIN,8511,88.95,6.18,4.68,0.19,0,RURAL
P.51,NEGERI SEMBILAN,P.51,SEREMBAN BARAT,7065,66.85,20.42,11.05,1.68,0,RURAL
P.52,NEGERI SEMBILAN,P.52,SEREMBAN TIMOR,5914,71.18,17.82,9.42,1.48,0,RURAL
P.53,PAHANG,P.53,LIPIS,12410,93.18,5.42,1.38,0.02,0,RURAL
P.54,PAHANG,P.54,RAUB,10402,91.48,6.38,2.11,0.03,0,RURAL
P.55,PAHANG,P.55,BENTONG,10820,88.45,10.48,1.02,0.05,0,RURAL
P.56,PAHANG,P.56,TEMERLOH,9029,91.35,8.62,0.02,0.01,0,RURAL
P.57,PAHANG,P.57,KUANTAN,12140,94.92,3.98,0.98,0.12,0,RURAL
P.58,PAHANG,P.58,PEKAN,10151,93.95,5.08,1.05,0.02,0,RURAL
P.59,JOHOR,P.59,JOHORE TIMOR,7710,82.85,12.42,4.68,0.05,0,RURAL
P.60,JOHOR,P.60,JOHORE TENGGARA,6445,85.68,10.78,3.52,0.02,0,RURAL
P.61,JOHOR,P.61,JOHORE BAHRU TIMOR,8185,80.92,13.48,5.25,0.35,0,URBAN
P.62,JOHOR,P.62,JOHORE BAHRU BARAT,6857,83.85,11.32,4.52,0.31,0,URBAN
P.63,JOHOR,P.63,PONTIAN SELATAN,15820,84.95,14.28,0.77,0,0,RURAL
P.64,JOHOR,P.64,PONTIAN UTARA,13270,88.05,11.68,0.27,0,0,RURAL
P.65,JOHOR,P.65,KLUANG SELATAN,6385,58.42,29.18,11.88,0.52,0,RURAL
P.66,JOHOR,P.66,KLUANG UTARA,5352,62.35,25.78,11.12,0.35,0,RURAL
P.67,JOHOR,P.67,BATU PAHAT,14890,74.25,21.85,2.38,0.02,0,RURAL
P.68,JOHOR,P.68,BATU PAHAT DALAM,12433,77.82,19.28,1.38,0.02,0,RURAL
P.69,JOHOR,P.69,MUAR SELATAN,18640,80.15,19.28,0.54,0.03,0,RURAL
P.70,JOHOR,P.70,MUAR PANTAI,15681,82.92,17.28,0.47,0.03,0,RURAL
P.71,JOHOR,P.71,MUAR UTARA,15920,72.45,22.85,4.65,0.05,0,RURAL
P.72,JOHOR,P.72,MUAR DALAM,13352,75.28,20.12,4.55,0.05,0,RURAL
P.73,JOHOR,P.73,SEGAMAT UTARA,9520,60.85,25.92,13.08,0.15,0,RURAL
P.74,JOHOR,P.74,SEGAMAT SELATAN,7962,63.95,23.18,12.78,0.09,0,RURAL
P.75,KEDAH,P.75,ALOR STAR,19180,90.85,7.28,1.52,0.35,0,RURAL
P.76,KEDAH,P.76,KUALA KEDAH,16081,92.92,5.88,0.92,0.18,0,RURAL
P.77,KEDAH,P.77,KOTA STAR UTARA,18525,94.28,3.52,0.18,1.92,0,RURAL
P.78,KEDAH,P.78,KOTA STAR SELATAN,15518,95.32,2.92,0.08,1.82,0,RURAL
P.79,KEDAH,P.79,KUBANG PASU BARAT,18480,94.12,1.68,0.28,3.92,0,RURAL
P.80,KEDAH,P.80,JITRA-PADANG TERAP,15486,94.92,1.22,0.14,3.72,0,RURAL
P.81,KEDAH,P.81,JERAI,20240,93.48,2.92,1.05,2.55,0,RURAL
P.82,KEDAH,P.82,KEDAH TENGAH,16936,94.58,2.28,0.65,2.49,0,RURAL
P.83,KEDAH,P.83,SUNGEI PATANI,14920,89.25,6.18,2.48,2.09,0,RURAL
P.84,KEDAH,P.84,BALING,12506,91.28,4.88,1.82,2.02,0,RURAL
P.85,KEDAH,P.85,KULIM UTARA,14110,84.82,7.98,6.52,0.68,0,RURAL
P.86,KEDAH,P.86,KULIM-BANDAR BAHRU,11807,87.28,6.48,5.68,0.56,0,RURAL
P.87,KELANTAN,P.87,ULU KELANTAN,21290,95.48,3.58,0,0,0.94,RURAL
P.88,KELANTAN,P.88,TANAH MERAH,17794,96.52,2.85,0,0,0.63,RURAL
P.89,KELANTAN,P.89,PASIR PUTEH,25140,97.82,1.12,0,0,1.06,RURAL
P.90,KELANTAN,P.90,BACHOK,21081,98.18,0.92,0,0,0.90,RURAL
P.91,KELANTAN,P.91,PASIR MAS HILIR,18920,95.18,2.95,0,0,1.87,RURAL
P.92,KELANTAN,P.92,PASIR MAS HULU,15859,96.18,2.42,0,0,1.40,RURAL
P.93,KELANTAN,P.93,TUMPAT,23150,92.18,2.68,0,0,5.14,RURAL
P.94,KELANTAN,P.94,KELANTAN HILIR,19360,93.22,2.08,0,0,4.70,RURAL
P.95,KELANTAN,P.95,KOTA BHARU HILIR,23480,96.12,3.35,0,0,0.53,RURAL
P.96,KELANTAN,P.96,KOTA BHARU HULU,19669,96.72,2.88,0,0,0.40,RURAL
P.97,TERENGGANU,P.97,BESUT,17690,99.25,0.68,0.02,0.05,0,RURAL
P.98,TERENGGANU,P.98,KUALA TRENGGANU UTARA,14792,99.08,0.88,0,0.04,0,RURAL
P.99,TERENGGANU,P.99,KUALA TRENGGANU SELATAN,18360,97.48,2.38,0.12,0.02,0,RURAL
P.100,TERENGGANU,P.100,TRENGGANU TENGAH,15359,98.08,1.88,0.03,0,0,RURAL
P.101,TERENGGANU,P.101,DUNGUN,12980,98.52,1.38,0.10,0,0,RURAL
P.102,TERENGGANU,P.102,KEMAMAN,10851,98.92,1.05,0.03,0,0,RURAL
P.103,PERLIS,P.103,PERLIS UTARA,16840,93.48,3.28,0.68,2.56,0,RURAL
P.104,PERLIS,P.104,PERLIS SELATAN,14096,94.58,2.58,0.48,2.36,0,RURAL`;

function toCamelCase(str: string): string {
  return str
    .trim()
    .toLowerCase()
    .replace(new RegExp('\\s*\\(%\\)'), ' percent')
    .replace(new RegExp('\\s*\\([^)]*\\)'), '')
    .replace(new RegExp('[^a-zA-Z0-9]+(.)?', 'g'), (_match, chr) => chr ? chr.toUpperCase() : '');
}

export const loadDemographicsData = async (): Promise<Demographics[]> => {
  // Simulating async to match interface, but data is immediate
  return new Promise((resolve) => {
    try {
        const lines = CSV_DATA.trim().split('\n');
        if (lines.length < 2) {
          resolve([]);
          return;
        }
    
        const headerLine = lines.shift()!;
        const headers = headerLine.split(',').map(h => toCamelCase(h.trim()));
        
        const data: Demographics[] = lines.map(line => {
          const values = line.split(',');
          const entry: { [key: string]: string | number } = {};
          
          headers.forEach((key, index) => {
            if (!key) return; 
            const value = values[index] ? values[index].trim() : '';
            const numValue = parseFloat(value);
            entry[key] = isNaN(numValue) || value.trim() === '' ? value : numValue;
          });
          return entry as unknown as Demographics;
        });
    
        resolve(data);
    } catch (e) {
        console.error("Error parsing hardcoded CSV", e);
        resolve([]);
    }
  });
};
